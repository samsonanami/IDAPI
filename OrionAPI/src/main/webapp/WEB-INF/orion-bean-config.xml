<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <bean id="realm" class="java.lang.String">
        <constructor-arg type="java.lang.String" value="ZONE_OAUTH_REALM" />
    </bean>

    <bean id="clientServiceInterface" class="com.fintech.orion.coreservices.ClientService"/>
    <bean id="licenseServiceInterface" class="com.fintech.orion.coreservices.LicenseService"/>
    <bean id="processingRequestServiceInterface" class="com.fintech.orion.coreservices.ProcessingRequestService"/>
    <bean id="processServiceInterface" class="com.fintech.orion.coreservices.ProcessService"/>
    <bean id="processTypeLicenseServiceInterface" class="com.fintech.orion.coreservices.LicenseService"/>
    <bean id="processTypeServiceInterface" class="com.fintech.orion.coreservices.ProcessTypeService"/>
    <bean id="resourceServiceInterface" class="com.fintech.orion.coreservices.ResourceService"/>
    <bean id="resourceTypeServiceInterface" class="com.fintech.orion.coreservices.ResourceTypeService"/>
    <bean id="processingStatusServiceInterface" class="com.fintech.orion.coreservices.ProcessingStatusService"/>
    <bean id="processConfigServiceInterface" class="com.fintech.orion.coreservices.ProcessConfigService"/>

    <bean id="clientRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ClientRepository"/>
    <bean id="licenseRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.LicenseRepository"/>
    <bean id="processingRequestRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ProcessingRequestRepository"/>
    <bean id="processRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ProcessRepository"/>
    <bean id="processTypeLicenseRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ProcessTypeLicenseRepository"/>
    <bean id="processTypeRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ProcessTypeRepository"/>
    <bean id="resourceRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ResourceRepository"/>
    <bean id="resourceTypeRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ResourceTypeRepository"/>
    <bean id="responseRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ResponseRepository"/>
    <bean id="processingStatusRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ProcessingStatusRepository"/>
    <bean id="processConfigRepositoryInterface" class="com.fintech.orion.dataabstraction.repositories.ProcessConfigRepository"/>

    <bean id="fileExtensionValidatorInterface" class="com.fintech.orion.helper.FileExtensionValidator" />
    <bean id="jsonValidatorInterface" class="com.fintech.orion.helper.JsonValidator" />
    <bean id="processingRequestHandlerInterface" class="com.fintech.orion.helper.ProcessingRequestHandler" />
    <bean id="clientValidatorInterface" class="com.fintech.orion.validation.ClientValidator" />

    <bean id="fileValidator" class="com.fintech.orion.validation.file.FileValidator" />
    <bean id="localFilePersistence" class="com.fintech.orion.io.file.LocalFilePersistence" />
    <bean id="genericDestinationProvider" class="com.fintech.orion.io.destination.generic.GenericDestinationProvider" />

    <bean id="jobProducerInterface" class="com.fintech.orion.messaging.job.JobProducer">
        <constructor-arg name="queueName" value="MainQueue" />
        <constructor-arg ref="destinationHandler" />
        <constructor-arg ref="sessionHandler" />
    </bean>

    <bean id="connectionFactory" name="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <property name="brokerURL" value="#{systemProperties['MESSAGE_BROKER_URL']}"/>
        <property name="userName" value="#{systemProperties['MESSAGING_USERNAME']}"/>
        <property name="password" value="#{systemProperties['MESSAGING_PASSWORD']}"/>
    </bean>

    <bean id="sessionHandler" class="com.fintech.orion.messaging.connection.SessionHandler">
        <constructor-arg ref="connectionFactory"/>
    </bean>

    <bean id="destinationHandler" class="com.fintech.orion.messaging.connection.DestinationHandler" />

    <bean id="jobHandlerInterface" class="com.fintech.orion.messaging.job.JobHandler" />
    <bean id="orionJobHandlerInterface" class="com.fintech.orion.handlers.OrionJobHandler" />
    <bean id="messageHandlerInterface" class="com.fintech.orion.handlers.MessageHandler" />

    <bean id="validatorFactory" class="org.springframework.beans.factory.config.ServiceLocatorFactoryBean">
        <property name="serviceLocatorInterface" value="com.fintech.orion.dto.validator.ValidatorFactoryInterface" />
    </bean>


    <util:map id="supportedFilesAndSizes" value-type="java.lang.Integer">
        <entry key="jpeg" value="5242880"/>
        <entry key="mp4" value="2097152" />
    </util:map>

</beans>
